{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\thread-loader\\dist\\cjs.js!E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\allOrderManage\\orderLogisticInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\allOrderManage\\orderLogisticInfo.vue","mtime":1579186746352},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getOrderLogisticDetailAPI, saveOrderLogisticAPI, updateOrderLogisticAPI } from '@/api/prodOrderLogisticAPI.js';\nimport { getOrderDetailAPI } from '@/api/prodOrderAPI.js';\nexport default {\n  name: 'prodList',\n  data: function data() {\n    return {\n      dataForm: {},\n      expressCompanyList: [{\n        id: 0,\n        name: \"圆通速递\",\n        number: \"YTO\"\n      }, {\n        id: 1,\n        name: \"申通快递\",\n        number: \"STO\"\n      }, {\n        id: 2,\n        name: \"中通快递\",\n        number: \"ZTO\"\n      }],\n      sendway: {\n        1: \"快递\",\n        2: \"自提\",\n        3: \"无需物流\"\n      },\n      expressCompany: '',\n      expressNumber: '',\n      logisticCode: '',\n      name: '',\n      phone: '',\n      address: '',\n      item: {},\n      order: {}\n    };\n  },\n  components: {// AddDepModal,\n  },\n  props: {\n    updateId: {\n      required: true\n    },\n    orderId: {\n      required: true\n    }\n  },\n  methods: {\n    /**\r\n     * @msg: 时间处理\r\n     * @param {type} \r\n     * @return: \r\n     */\n    timechange: function timechange(time, type) {\n      return timeStamp2String(time, type);\n    },\n\n    /*\r\n     * 获取详情\r\n     */\n    getDetail: function getDetail(id) {\n      var _this = this;\n\n      this.tableLoading = true;\n      getOrderLogisticDetailAPI(id).then(function (res) {\n        var orderdata = res.data.data;\n        console.log(orderdata);\n        _this.item = orderdata;\n        _this.expressCompany = orderdata.expressCompany;\n        _this.expressNumber = orderdata.expressNumber;\n        _this.logisticCode = orderdata.logisticCode;\n        _this.name = orderdata.contactName;\n        _this.phone = orderdata.contactPhone;\n        _this.address = orderdata.contactAddress;\n        console.log(_this.dataForm.expressCompany);\n      }).catch(function (err) {\n        _this.tableLoading = false;\n      });\n    },\n    dataFormSubmit: function dataFormSubmit() {\n      var _this2 = this;\n\n      for (var i = 0; i < this.expressCompanyList.length; i++) {\n        if (this.expressCompanyList[i].name == this.expressCompany) {\n          this.expressNumber = this.expressCompanyList[i].number;\n        }\n      }\n\n      console.log(\"快递公司：\" + this.expressCompany + \" 快递公司编号：\" + this.expressNumber); //累加订单产品id\n\n      console.log(this.order);\n      var opid = \"\";\n\n      for (var i = 0; i < this.order.orderProductVOList.length; i++) {\n        if (i == this.order.orderProductVOList.length - 1) {\n          opid += this.order.orderProductVOList[i].id;\n        } else {\n          opid += this.order.orderProductVOList[i].id + \",\";\n        }\n      }\n\n      console.log(\"opid\" + opid);\n      this.$refs['dataForm'].validate(function (valid) {\n        var args = {\n          orderId: _this2.orderId,\n          orderProductId: opid,\n          expressCompany: _this2.expressCompany,\n          expressNumber: _this2.expressNumber,\n          logisticCode: _this2.logisticCode,\n          contactName: _this2.name,\n          contactPhone: _this2.phone,\n          contactAddress: _this2.address\n        };\n        console.log(args);\n\n        if (_this2.updateId == 0) {\n          saveOrderLogisticAPI(args).then(function (res) {\n            var data = res.data;\n\n            if (data.code === 200) {\n              _this2.$message({\n                type: 'success',\n                message: '添加成功'\n              });\n\n              _this2.$emit('close-form');\n\n              _this2.$emit('finish-action');\n            } else {\n              _this2.$message.error(res.data.msg);\n            }\n          }).catch(function (err) {});\n        } else {\n          args.id = _this2.item.id;\n          updateOrderLogisticAPI(args).then(function (res) {\n            var data = res.data;\n\n            if (data.code === 200) {\n              _this2.$message({\n                type: 'success',\n                message: '修改成功'\n              });\n\n              _this2.$emit('close-form');\n\n              _this2.$emit('finish-action');\n            } else {\n              _this2.$message.error(res.data.msg);\n            }\n          }).catch(function (err) {});\n        }\n      });\n    },\n\n    /*\r\n         * 获取订单详情\r\n         */\n    getOrderDetail: function getOrderDetail(id) {\n      var _this3 = this;\n\n      this.tableLoading = true;\n      getOrderDetailAPI(id).then(function (res) {\n        console.log(res);\n        _this3.order = res.data.data;\n        _this3.name = _this3.order.contactName;\n        _this3.phone = _this3.order.contactPhone;\n        _this3.address = _this3.order.contactAddress;\n      }).catch(function (err) {});\n    }\n  },\n  mounted: function mounted() {\n    if (this.updateId > 0) {\n      this.getDetail(this.updateId);\n    }\n\n    this.getOrderDetail(this.orderId);\n  }\n};",null]}
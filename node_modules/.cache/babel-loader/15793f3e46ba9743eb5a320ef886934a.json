{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\thread-loader\\dist\\cjs.js!E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\question\\questionInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\question\\questionInfo.vue","mtime":1578505796468},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\HtmlProjects\\\\qmfx\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getQuestionDetailAPI, updateQuestionAPI, saveQuestionAPI, getQuestionTypeListAPI } from '@/api/questionAPI.js';\nimport axios from 'axios';\nimport E from 'wangeditor';\nexport default {\n  name: 'prodList',\n  data: function data() {\n    return {\n      dataForm: {\n        title: '',\n        content: '',\n        typeId: ''\n      },\n      form: {\n        size: 50,\n        current: 1 // statusType:'1'\n\n      },\n      item: {},\n      typelist: [],\n      rules: {}\n    };\n  },\n  components: {// AddDepModal,\n  },\n  props: {\n    updateId: {\n      required: true\n    }\n  },\n  methods: {\n    /*\r\n     * 获取代理等级详情\r\n     */\n    getDetail: function getDetail(id) {\n      var _this = this;\n\n      this.tableLoading = true;\n      getQuestionDetailAPI(id).then(function (res) {\n        var orderdata = res.data.data;\n        console.log(orderdata);\n        _this.item = orderdata;\n        _this.dataForm = _this.item;\n        var editor = new E('#editorElem');\n        editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n        editor.customConfig.onchange = function (html) {\n          _this.dataForm.content = html;\n        };\n\n        editor.customConfig.customUploadImg = function (files, insert) {\n          var formData = new FormData();\n          formData.append('files', files[0]);\n          axios.post(\"http://admin.zhanchengwlkj.com:8080/distribution_backstage/file/addFile\", formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          }).then(function (res) {\n            var data = res.data;\n            insert(data.data); // 插入图片到editor\n          }); // formData.append('path', 'files/ne-icev3-dashboard/content/content/');\n        };\n\n        editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n        editor.create();\n        editor.txt.html(_this.dataForm.content);\n      }).catch(function (err) {});\n    },\n    getQuestionTypeList: function getQuestionTypeList() {\n      var _this2 = this;\n\n      var params = _objectSpread({}, this.form);\n\n      getQuestionTypeListAPI(params).then(function (res) {\n        console.log(res.data.data);\n        var data = res.data.data;\n        _this2.typelist = data;\n      }).catch(function (err) {});\n    },\n    // 表单提交\n    dataFormSubmit: function dataFormSubmit() {\n      var _this3 = this;\n\n      console.log(\"title:\" + this.dataForm.title + \" id:\" + this.updateId + \" content:\" + this.dataForm.content);\n      var that = this;\n      var putdata = {\n        title: this.dataForm.title,\n        content: this.dataForm.content,\n        typeId: this.dataForm.typeId\n      };\n\n      if (this.updateId == 0) {\n        saveQuestionAPI(putdata).then(function (res) {\n          var data = res.data;\n\n          if (data.code === 200) {\n            _this3.$message({\n              type: 'success',\n              message: '添加成功'\n            });\n\n            _this3.backhtmls();\n\n            _this3.$emit('finish-action');\n          } else {\n            _this3.$message.error(res.data.msg);\n          }\n        }).catch(function (err) {});\n      } else {\n        putdata.id = this.updateId;\n        updateQuestionAPI(putdata).then(function (res) {\n          console.log(res);\n          var sucresponse = res.data;\n\n          if (sucresponse.code == 200) {\n            _this3.$message({\n              type: 'success',\n              message: '修改成功'\n            });\n\n            _this3.$emit('close-form');\n\n            _this3.$emit('finish-action');\n          } else {\n            _this3.errorMsg(sucresponse.message);\n          }\n        }).catch(function (err) {\n          console.log(err);\n          _this3.tableLoading = false;\n        });\n      }\n    },\n\n    /*\r\n    * 返回上层\r\n    */\n    backhtmls: function backhtmls() {\n      this.$emit('close-form');\n    }\n  },\n  mounted: function mounted() {\n    var _this4 = this;\n\n    if (this.updateId == 0) {\n      var editor = new E('#editorElem');\n      editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n      editor.customConfig.onchange = function (html) {\n        _this4.dataForm.content = html;\n      };\n\n      editor.customConfig.customUploadImg = function (files, insert) {\n        var formData = new FormData();\n        formData.append('files', files[0]);\n        axios.post(\"http://admin.zhanchengwlkj.com:8080/distribution_backstage/file/addFile\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        }).then(function (res) {\n          var data = res.data;\n          insert(data.data); // 插入图片到editor\n        }); // formData.append('path', 'files/ne-icev3-dashboard/content/content/');\n      };\n\n      editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n      editor.create();\n    } else {\n      this.getDetail(this.updateId);\n    }\n\n    this.getQuestionTypeList();\n  }\n};",null]}
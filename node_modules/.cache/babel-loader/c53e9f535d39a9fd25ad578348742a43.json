{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\menu\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\menu\\Index.vue","mtime":1573789319144},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"E:\\\\HtmlProjects\\\\qmfx\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport NavItem from './NavItem';\nimport Vue from 'vue';\nimport router from '@/router';\nimport { Message } from 'element-ui';\nimport { getAuthListAPI } from '@/api/globalAPI.js';\nimport { MENU_LIST } from '@/public/constant';\nexport default {\n  name: 'NavMenu',\n  data: function data() {\n    return {\n      menuList: []\n    };\n  },\n  components: {\n    NavItem: NavItem\n  },\n  computed: _objectSpread({}, mapState('menu', {\n    itemActiveIndex: function itemActiveIndex(state) {\n      return state.itemActiveIndex;\n    }\n  })),\n  methods: {\n    /**\n     * 菜单点击选择事件\n     */\n    handleSelectMenu: function handleSelectMenu(index) {\n      if (index !== this.itemActiveIndex) {\n        this.$store.commit('menu/changeActiveItem', index);\n      }\n    },\n\n    /**\n     * 构建对应权限菜单\n     */\n    buildAuthNav: function buildAuthNav() {\n      var _this = this;\n\n      getAuthListAPI().then(function (res) {\n        var authList = res.data.data.map(function (item) {\n          return item.subModuleName;\n        });\n\n        function buildNewMenu(arrayDone) {\n          var newArray = [];\n          arrayDone.forEach(function (item, index) {\n            if (item.children && item.children.length > 0) {\n              // 递归过滤 children \n              var newChildren = buildNewMenu(item.children); // 如果过滤后的 newChildren 长度大于零，push 该菜单\n\n              if (newChildren.length > 0) {\n                newArray.push(Object.assign({}, item, {\n                  children: newChildren\n                }));\n              }\n            } else {\n              if (authList.indexOf(item.name) > -1) {\n                newArray.push(item);\n              }\n            }\n          });\n          return newArray;\n        }\n\n        var newMenu = buildNewMenu(MENU_LIST);\n        _this.menuList = newMenu;\n      });\n    },\n    getCookie: function getCookie(c_name) {\n      if (document.cookie.length > 0) {\n        var c_start = document.cookie.indexOf(c_name + \"=\");\n\n        if (c_start != -1) {\n          c_start = c_start + c_name.length + 1;\n          var c_end = document.cookie.indexOf(\";\", c_start);\n          if (c_end == -1) c_end = document.cookie.length;\n          return unescape(document.cookie.substring(c_start, c_end)).replace(/\\\"/g, \"\");\n        }\n      }\n\n      return null;\n    }\n  },\n  created: function created() {\n    this.menuList = MENU_LIST; // this.buildAuthNav();\n    // console.log(this.getCookie(\"userId\"))\n    // if(sessionStorage.getItem('token')==undefined||sessionStorage.getItem('token')==null||sessionStorage.getItem('token')==''){\n    //     Vue.prototype.$message({type: 'error', message: '登录信息过期！请重新登录'})\n    //     // reject('登录信息过期！请重新登录');\n    //     router.push('/login');\n    // }\n    // 重新登录设置首页为初始页面\n\n    this.$store.commit('menu/changeActiveItem', 'home');\n  }\n};",{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAaA,SAAA,QAAA,QAAA,MAAA;AAEA,OAAA,OAAA,MAAA,WAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,MAAA,MAAA,UAAA;AACA,SAAA,OAAA,QAAA,YAAA;AAEA,SACA,cADA,QAEA,oBAFA;AAGA,SAAA,SAAA,QAAA,mBAAA;AAEA,eAAA;AACA,QAAA,SADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,gBAAA;AADA,KAAA;AAGA,GANA;AAOA,cAAA;AACA;AADA,GAPA;AAUA,8BACA,SAAA,MAAA,EAAA;AACA,qBAAA;AAAA,aAAA,MAAA,eAAA;AAAA;AADA,GAAA,CADA,CAVA;AAeA,WAAA;AACA;;;AAGA,oBAJA,4BAIA,KAJA,EAIA;AACA,UAAA,UAAA,KAAA,eAAA,EAAA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,uBAAA,EAAA,KAAA;AACA;AACA,KARA;;AASA;;;AAGA,gBAZA,0BAYA;AAAA;;AACA,uBACA,IADA,CACA,eAAA;AACA,YAAA,WAAA,IAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,iBAAA,KAAA,aAAA;AAAA,SAAA,CAAA;;AAEA,iBAAA,YAAA,CAAA,SAAA,EAAA;AACA,cAAA,WAAA,EAAA;AAEA,oBAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,gBAAA,KAAA,QAAA,IAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA;AACA,kBAAA,cAAA,aAAA,KAAA,QAAA,CAAA,CAFA,CAIA;;AACA,kBAAA,YAAA,MAAA,GAAA,CAAA,EAAA;AACA,yBAAA,IAAA,CAAA,OAAA,MAAA,CAAA,EAAA,EAAA,IAAA,EAAA;AACA,4BAAA;AADA,iBAAA,CAAA;AAGA;AACA,aAVA,MAUA;AACA,kBAAA,SAAA,OAAA,CAAA,KAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA,yBAAA,IAAA,CAAA,IAAA;AACA;AACA;AACA,WAhBA;AAkBA,iBAAA,QAAA;AACA;;AAEA,YAAA,UAAA,aAAA,SAAA,CAAA;AAEA,cAAA,QAAA,GAAA,OAAA;AACA,OA/BA;AAgCA,KA7CA;AA8CA,aA9CA,qBA8CA,MA9CA,EA8CA;AACA,UAAA,SAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,YAAA,UAAA,SAAA,MAAA,CAAA,OAAA,CAAA,SAAA,GAAA,CAAA;;AACA,YAAA,WAAA,CAAA,CAAA,EAAA;AACA,oBAAA,UAAA,OAAA,MAAA,GAAA,CAAA;AACA,cAAA,QAAA,SAAA,MAAA,CAAA,OAAA,CAAA,GAAA,EAAA,OAAA,CAAA;AACA,cAAA,SAAA,CAAA,CAAA,EAAA,QAAA,SAAA,MAAA,CAAA,MAAA;AACA,iBAAA,SAAA,SAAA,MAAA,CAAA,SAAA,CAAA,OAAA,EAAA,KAAA,CAAA,EAAA,OAAA,CAAA,KAAA,EAAA,EAAA,CAAA;AACA;AACA;;AACA,aAAA,IAAA;AACA;AAzDA,GAfA;AA0EA,SA1EA,qBA0EA;AACA,SAAA,QAAA,GAAA,SAAA,CADA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAA,MAAA,CAAA,MAAA,CAAA,uBAAA,EAAA,MAAA;AACA;AArFA,CAAA","sourcesContent":["<!-- 菜单入口 -->\n<template>\n    <el-menu \n    @select=\"handleSelectMenu\" \n    :default-active=\"itemActiveIndex\" \n    :active-text-color=\"itemActiveIndex ? '#409EFF' : '#303133'\"\n    :unique-opened=\"true\">\n        <!-- <nav-item :key=\"index\" v-for=\"(item, index) in menuList\" :menuItem=\"item\" :menuIndex=\"index + ''\"></nav-item> -->\n        <nav-item :key=\"index\" v-for=\"(item, index) in menuList\" :menuItem=\"item\"  :menuIndex=\"item.id\"></nav-item>\n    </el-menu>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nimport NavItem from'./NavItem';\nimport Vue from 'vue';\nimport router from '@/router';\nimport {Message} from 'element-ui';\n\nimport {\n    getAuthListAPI,\n} from '@/api/globalAPI.js';\nimport { MENU_LIST } from '@/public/constant';\n\nexport default {\n    name:'NavMenu',\n    data() {\n        return {\n            menuList: [],\n        };\n    },\n    components: {\n        NavItem,\n    },\n    computed: {\n        ...mapState('menu', {\n            itemActiveIndex: state => state.itemActiveIndex,\n        })\n    },\n    methods: {\n        /**\n         * 菜单点击选择事件\n         */\n        handleSelectMenu(index) {\n            if (index !== this.itemActiveIndex) {\n                this.$store.commit('menu/changeActiveItem', index);\n            }\n        },\n        /**\n         * 构建对应权限菜单\n         */\n        buildAuthNav() {\n            getAuthListAPI()\n                .then(res => {\n                    let authList = res.data.data.map(item => item.subModuleName);\n\n                    function buildNewMenu(arrayDone) {\n                        let newArray = [];\n\n                        arrayDone.forEach((item, index) => {\n                            if (item.children && item.children.length > 0) {\n                                // 递归过滤 children \n                                let newChildren = buildNewMenu(item.children);\n\n                                // 如果过滤后的 newChildren 长度大于零，push 该菜单\n                                if (newChildren.length > 0) {\n                                    newArray.push(Object.assign({}, item, {\n                                        children: newChildren,\n                                    }));\n                                }\n                            } else {\n                                if (authList.indexOf(item.name) > -1) {\n                                    newArray.push(item);\n                                }\n                            }\n                        });\n\n                        return newArray;\n                    }\n\n                    let newMenu = buildNewMenu(MENU_LIST);\n\n                    this.menuList = newMenu;\n                })\n        },\n        getCookie(c_name) {\n            if (document.cookie.length > 0) {\n                var c_start = document.cookie.indexOf(c_name + \"=\")\n                if (c_start != -1) {\n                    c_start = c_start + c_name.length + 1\n                    var c_end = document.cookie.indexOf(\";\", c_start)\n                    if (c_end == -1) c_end = document.cookie.length\n                    return unescape(document.cookie.substring(c_start, c_end)).replace(/\\\"/g, \"\");\n                }\n            }\n            return null;\n        }\n    },\n    created() {\n         this.menuList = MENU_LIST;\n        // this.buildAuthNav();\n        // console.log(this.getCookie(\"userId\"))\n        // if(sessionStorage.getItem('token')==undefined||sessionStorage.getItem('token')==null||sessionStorage.getItem('token')==''){\n        //     Vue.prototype.$message({type: 'error', message: '登录信息过期！请重新登录'})\n        //     // reject('登录信息过期！请重新登录');\n        //     router.push('/login');\n        // }\n        // 重新登录设置首页为初始页面\n        this.$store.commit('menu/changeActiveItem', 'home')\n    },\n}\n</script>\n\n<style scoped lang=\"less\">\n</style>"],"sourceRoot":"src\\components\\menu"}]}
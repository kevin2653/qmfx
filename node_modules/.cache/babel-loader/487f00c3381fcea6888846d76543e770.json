{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\allOrderManage\\orderLogisticInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\allOrderManage\\orderLogisticInfo.vue","mtime":1579186746352},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getOrderLogisticDetailAPI, saveOrderLogisticAPI, updateOrderLogisticAPI } from '@/api/prodOrderLogisticAPI.js';\nimport { getOrderDetailAPI } from '@/api/prodOrderAPI.js';\nexport default {\n  name: 'prodList',\n  data: function data() {\n    return {\n      dataForm: {},\n      expressCompanyList: [{\n        id: 0,\n        name: \"圆通速递\",\n        number: \"YTO\"\n      }, {\n        id: 1,\n        name: \"申通快递\",\n        number: \"STO\"\n      }, {\n        id: 2,\n        name: \"中通快递\",\n        number: \"ZTO\"\n      }],\n      sendway: {\n        1: \"快递\",\n        2: \"自提\",\n        3: \"无需物流\"\n      },\n      expressCompany: '',\n      expressNumber: '',\n      logisticCode: '',\n      name: '',\n      phone: '',\n      address: '',\n      item: {},\n      order: {}\n    };\n  },\n  components: {// AddDepModal,\n  },\n  props: {\n    updateId: {\n      required: true\n    },\n    orderId: {\n      required: true\n    }\n  },\n  methods: {\n    /**\r\n     * @msg: 时间处理\r\n     * @param {type} \r\n     * @return: \r\n     */\n    timechange: function timechange(time, type) {\n      return timeStamp2String(time, type);\n    },\n\n    /*\r\n     * 获取详情\r\n     */\n    getDetail: function getDetail(id) {\n      var _this = this;\n\n      this.tableLoading = true;\n      getOrderLogisticDetailAPI(id).then(function (res) {\n        var orderdata = res.data.data;\n        console.log(orderdata);\n        _this.item = orderdata;\n        _this.expressCompany = orderdata.expressCompany;\n        _this.expressNumber = orderdata.expressNumber;\n        _this.logisticCode = orderdata.logisticCode;\n        _this.name = orderdata.contactName;\n        _this.phone = orderdata.contactPhone;\n        _this.address = orderdata.contactAddress;\n        console.log(_this.dataForm.expressCompany);\n      }).catch(function (err) {\n        _this.tableLoading = false;\n      });\n    },\n    dataFormSubmit: function dataFormSubmit() {\n      var _this2 = this;\n\n      for (var i = 0; i < this.expressCompanyList.length; i++) {\n        if (this.expressCompanyList[i].name == this.expressCompany) {\n          this.expressNumber = this.expressCompanyList[i].number;\n        }\n      }\n\n      console.log(\"快递公司：\" + this.expressCompany + \" 快递公司编号：\" + this.expressNumber); //累加订单产品id\n\n      console.log(this.order);\n      var opid = \"\";\n\n      for (var i = 0; i < this.order.orderProductVOList.length; i++) {\n        if (i == this.order.orderProductVOList.length - 1) {\n          opid += this.order.orderProductVOList[i].id;\n        } else {\n          opid += this.order.orderProductVOList[i].id + \",\";\n        }\n      }\n\n      console.log(\"opid\" + opid);\n      this.$refs['dataForm'].validate(function (valid) {\n        var args = {\n          orderId: _this2.orderId,\n          orderProductId: opid,\n          expressCompany: _this2.expressCompany,\n          expressNumber: _this2.expressNumber,\n          logisticCode: _this2.logisticCode,\n          contactName: _this2.name,\n          contactPhone: _this2.phone,\n          contactAddress: _this2.address\n        };\n        console.log(args);\n\n        if (_this2.updateId == 0) {\n          saveOrderLogisticAPI(args).then(function (res) {\n            var data = res.data;\n\n            if (data.code === 200) {\n              _this2.$message({\n                type: 'success',\n                message: '添加成功'\n              });\n\n              _this2.$emit('close-form');\n\n              _this2.$emit('finish-action');\n            } else {\n              _this2.$message.error(res.data.msg);\n            }\n          }).catch(function (err) {});\n        } else {\n          args.id = _this2.item.id;\n          updateOrderLogisticAPI(args).then(function (res) {\n            var data = res.data;\n\n            if (data.code === 200) {\n              _this2.$message({\n                type: 'success',\n                message: '修改成功'\n              });\n\n              _this2.$emit('close-form');\n\n              _this2.$emit('finish-action');\n            } else {\n              _this2.$message.error(res.data.msg);\n            }\n          }).catch(function (err) {});\n        }\n      });\n    },\n\n    /*\r\n         * 获取订单详情\r\n         */\n    getOrderDetail: function getOrderDetail(id) {\n      var _this3 = this;\n\n      this.tableLoading = true;\n      getOrderDetailAPI(id).then(function (res) {\n        console.log(res);\n        _this3.order = res.data.data;\n        _this3.name = _this3.order.contactName;\n        _this3.phone = _this3.order.contactPhone;\n        _this3.address = _this3.order.contactAddress;\n      }).catch(function (err) {});\n    }\n  },\n  mounted: function mounted() {\n    if (this.updateId > 0) {\n      this.getDetail(this.updateId);\n    }\n\n    this.getOrderDetail(this.orderId);\n  }\n};",{"version":3,"sources":["orderLogisticInfo.vue"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * @Description: 订单详情\r\n * @Author: jian.weng\r\n * @Date: 2019-10-29 10:49:29\r\n */\r\n\r\n<template>\r\n    <div>\r\n       \r\n        <el-form :model=\"dataForm\"\r\n             ref=\"dataForm\"\r\n             label-width=\"150px\">\r\n            <el-form-item label=\"快递公司选择\">\r\n                <el-select v-model=\"expressCompany\"   placeholder=\"请选择\">\r\n                    <el-option\r\n                        v-for=\"item in expressCompanyList\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.name\"\r\n                        :value=\"item.name\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"快递单号:\"\r\n                            :rules=\"[{ required: true, message: '快递单号不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"logisticCode\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系人:\"\r\n                            :rules=\"[{ required: true, message: '联系人不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"name\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系电话:\"\r\n                            :rules=\"[{ required: true, message: '联系电话不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"phone\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"收货地址:\"\r\n                            :rules=\"[{ required: true, message: '收货地址不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"address\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n             <el-form-item>\r\n            <el-button type=\"primary\"\r\n                    @click=\"dataFormSubmit()\">确定</el-button>\r\n            </el-form-item>\r\n       </el-form>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n     getOrderLogisticDetailAPI,\r\n     saveOrderLogisticAPI,\r\n     updateOrderLogisticAPI\r\n} from '@/api/prodOrderLogisticAPI.js'\r\nimport {\r\n     getOrderDetailAPI,\r\n} from '@/api/prodOrderAPI.js'\r\nexport default {\r\n    name:'prodList',\r\n    data(){\r\n        return{\r\n            dataForm:{\r\n    \r\n            },\r\n            expressCompanyList:[\r\n                {id:0,name:\"圆通速递\",number:\"YTO\"},\r\n                {id:1,name:\"申通快递\",number:\"STO\"},\r\n                {id:2,name:\"中通快递\",number:\"ZTO\"}\r\n            ]\r\n            ,\r\n            sendway:{\r\n                1:\"快递\",\r\n                2:\"自提\",\r\n                3:\"无需物流\"\r\n            },\r\n            expressCompany:'',\r\n            expressNumber:'',\r\n            logisticCode:'',\r\n            name:'',\r\n            phone:'',\r\n            address:'',\r\n            item:{},\r\n            order:{}\r\n        };\r\n    },\r\n    components:{\r\n        // AddDepModal,\r\n    },\r\n    props: {\r\n        updateId: {\r\n            required: true,\r\n        },\r\n        orderId: {\r\n            required: true,\r\n        }\r\n    },\r\n    methods:{\r\n        /**\r\n         * @msg: 时间处理\r\n         * @param {type} \r\n         * @return: \r\n         */\r\n        timechange(time,type){\r\n            return timeStamp2String(time,type)\r\n        },\r\n        /*\r\n         * 获取详情\r\n         */\r\n        getDetail(id){\r\n            this.tableLoading = true;\r\n             getOrderLogisticDetailAPI(id)\r\n                .then(res => {\r\n                    const orderdata=res.data.data\r\n                    console.log(orderdata)\r\n                    this.item = orderdata;\r\n                    this.expressCompany = orderdata.expressCompany;\r\n                    this.expressNumber = orderdata.expressNumber;\r\n                    this.logisticCode = orderdata.logisticCode;\r\n                    this.name = orderdata.contactName;\r\n                    this.phone = orderdata.contactPhone;\r\n                    this.address = orderdata.contactAddress;\r\n                    console.log(this.dataForm.expressCompany)\r\n                })\r\n                .catch(err => {\r\n                    this.tableLoading = false;\r\n                })\r\n        },\r\n        dataFormSubmit () {\r\n          \r\n            for(var i=0;i<this.expressCompanyList.length;i++){\r\n                if(this.expressCompanyList[i].name == this.expressCompany){\r\n                    this.expressNumber = this.expressCompanyList[i].number;\r\n                }\r\n            }\r\n            console.log(\"快递公司：\"+this.expressCompany+\" 快递公司编号：\"+this.expressNumber);\r\n            //累加订单产品id\r\n            console.log(this.order);\r\n            var opid = \"\";\r\n            for(var i=0;i<this.order.orderProductVOList.length;i++){\r\n                if(i==this.order.orderProductVOList.length-1){\r\n                    opid+=this.order.orderProductVOList[i].id;\r\n                }else{\r\n                    opid+=this.order.orderProductVOList[i].id+\",\";\r\n                }\r\n               \r\n            }\r\n            console.log(\"opid\"+opid);\r\n        this.$refs['dataForm'].validate((valid) => {\r\n                    const args = {\r\n                        orderId:this.orderId,\r\n                        orderProductId:opid,\r\n                        expressCompany:this.expressCompany,\r\n                        expressNumber:this.expressNumber,\r\n                        logisticCode:this.logisticCode,\r\n                        contactName:this.name,\r\n                        contactPhone:this.phone,\r\n                        contactAddress:this.address\r\n                    };\r\n                    console.log(args);\r\n                 \r\n                    if(this.updateId==0){\r\n                      saveOrderLogisticAPI(args)\r\n                        .then(res => {\r\n                            const data = res.data;\r\n                            if (data.code === 200) {\r\n                                    this.$message({\r\n                                        type: 'success',\r\n                                        message: '添加成功',\r\n                                    });\r\n                                this.$emit('close-form')\r\n                                this.$emit('finish-action')\r\n                            }else{\r\n                                this.$message.error(res.data.msg)\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                        });\r\n                    }else{\r\n                      args.id=this.item.id\r\n                      updateOrderLogisticAPI(args)\r\n                        .then(res => {\r\n                            const data = res.data;\r\n                            if (data.code === 200) {\r\n                                    this.$message({\r\n                                        type: 'success',\r\n                                        message: '修改成功',\r\n                                    });\r\n                                this.$emit('close-form')\r\n                                this.$emit('finish-action')\r\n                            }else{\r\n                                this.$message.error(res.data.msg)\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                        });\r\n                    }\r\n        })\r\n    },\r\n    /*\r\n         * 获取订单详情\r\n         */\r\n        getOrderDetail(id){\r\n            this.tableLoading = true;\r\n             getOrderDetailAPI(id)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    this.order=res.data.data;\r\n               \r\n                    this.name = this.order.contactName;\r\n                    this.phone = this.order.contactPhone;\r\n                    this.address = this.order.contactAddress;\r\n                })\r\n                .catch(err => {\r\n                    \r\n                })\r\n        },\r\n        \r\n    },\r\n    mounted(){\r\n        if(this.updateId>0){\r\n            this.getDetail(this.updateId)\r\n        }\r\n\r\n        this.getOrderDetail(this.orderId);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.prod-img{\r\n  max-width: 64px;\r\n    min-width: 64px;\r\n    width: 64px;\r\n    height: 64px;\r\n    line-height: 64px;\r\n    border-radius: 4px;\r\n}\r\n.prod-detail{\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n  line-height: 24px;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src\\components\\allOrderManage"}]}
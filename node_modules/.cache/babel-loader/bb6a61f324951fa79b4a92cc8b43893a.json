{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\question\\questionInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\question\\questionInfo.vue","mtime":1578505796468},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\HtmlProjects\\\\qmfx\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getQuestionDetailAPI, updateQuestionAPI, saveQuestionAPI, getQuestionTypeListAPI } from '@/api/questionAPI.js';\nimport axios from 'axios';\nimport E from 'wangeditor';\nexport default {\n  name: 'prodList',\n  data: function data() {\n    return {\n      dataForm: {\n        title: '',\n        content: '',\n        typeId: ''\n      },\n      form: {\n        size: 50,\n        current: 1 // statusType:'1'\n\n      },\n      item: {},\n      typelist: [],\n      rules: {}\n    };\n  },\n  components: {// AddDepModal,\n  },\n  props: {\n    updateId: {\n      required: true\n    }\n  },\n  methods: {\n    /*\r\n     * 获取代理等级详情\r\n     */\n    getDetail: function getDetail(id) {\n      var _this = this;\n\n      this.tableLoading = true;\n      getQuestionDetailAPI(id).then(function (res) {\n        var orderdata = res.data.data;\n        console.log(orderdata);\n        _this.item = orderdata;\n        _this.dataForm = _this.item;\n        var editor = new E('#editorElem');\n        editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n        editor.customConfig.onchange = function (html) {\n          _this.dataForm.content = html;\n        };\n\n        editor.customConfig.customUploadImg = function (files, insert) {\n          var formData = new FormData();\n          formData.append('files', files[0]);\n          axios.post(\"http://admin.zhanchengwlkj.com:8080/distribution_backstage/file/addFile\", formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\"\n            }\n          }).then(function (res) {\n            var data = res.data;\n            insert(data.data); // 插入图片到editor\n          }); // formData.append('path', 'files/ne-icev3-dashboard/content/content/');\n        };\n\n        editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n        editor.create();\n        editor.txt.html(_this.dataForm.content);\n      }).catch(function (err) {});\n    },\n    getQuestionTypeList: function getQuestionTypeList() {\n      var _this2 = this;\n\n      var params = _objectSpread({}, this.form);\n\n      getQuestionTypeListAPI(params).then(function (res) {\n        console.log(res.data.data);\n        var data = res.data.data;\n        _this2.typelist = data;\n      }).catch(function (err) {});\n    },\n    // 表单提交\n    dataFormSubmit: function dataFormSubmit() {\n      var _this3 = this;\n\n      console.log(\"title:\" + this.dataForm.title + \" id:\" + this.updateId + \" content:\" + this.dataForm.content);\n      var that = this;\n      var putdata = {\n        title: this.dataForm.title,\n        content: this.dataForm.content,\n        typeId: this.dataForm.typeId\n      };\n\n      if (this.updateId == 0) {\n        saveQuestionAPI(putdata).then(function (res) {\n          var data = res.data;\n\n          if (data.code === 200) {\n            _this3.$message({\n              type: 'success',\n              message: '添加成功'\n            });\n\n            _this3.backhtmls();\n\n            _this3.$emit('finish-action');\n          } else {\n            _this3.$message.error(res.data.msg);\n          }\n        }).catch(function (err) {});\n      } else {\n        putdata.id = this.updateId;\n        updateQuestionAPI(putdata).then(function (res) {\n          console.log(res);\n          var sucresponse = res.data;\n\n          if (sucresponse.code == 200) {\n            _this3.$message({\n              type: 'success',\n              message: '修改成功'\n            });\n\n            _this3.$emit('close-form');\n\n            _this3.$emit('finish-action');\n          } else {\n            _this3.errorMsg(sucresponse.message);\n          }\n        }).catch(function (err) {\n          console.log(err);\n          _this3.tableLoading = false;\n        });\n      }\n    },\n\n    /*\r\n    * 返回上层\r\n    */\n    backhtmls: function backhtmls() {\n      this.$emit('close-form');\n    }\n  },\n  mounted: function mounted() {\n    var _this4 = this;\n\n    if (this.updateId == 0) {\n      var editor = new E('#editorElem');\n      editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n      editor.customConfig.onchange = function (html) {\n        _this4.dataForm.content = html;\n      };\n\n      editor.customConfig.customUploadImg = function (files, insert) {\n        var formData = new FormData();\n        formData.append('files', files[0]);\n        axios.post(\"http://admin.zhanchengwlkj.com:8080/distribution_backstage/file/addFile\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        }).then(function (res) {\n          var data = res.data;\n          insert(data.data); // 插入图片到editor\n        }); // formData.append('path', 'files/ne-icev3-dashboard/content/content/');\n      };\n\n      editor.customConfig.uploadImgShowBase64 = true; //图片以base64形式保存\n\n      editor.create();\n    } else {\n      this.getDetail(this.updateId);\n    }\n\n    this.getQuestionTypeList();\n  }\n};",{"version":3,"sources":["questionInfo.vue"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * @Description: 问题详情\r\n * @Author: jian.weng\r\n * @Date: 2019-10-29 10:49:29\r\n */\r\n\r\n<template>\r\n    <div>\r\n       \r\n       <el-form :model=\"dataForm\"\r\n             ref=\"dataForm\"\r\n             label-width=\"150px\">\r\n            <el-form-item label=\"问题标题:\"\r\n                            :rules=\"[{ required: true, message: '标题不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"dataForm.title\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item style=\"margin-top:10px\"  label=\"问题分类\">\r\n                    <el-select  v-model=\"dataForm.typeId\"  placeholder=\"请选择\">\r\n                    <el-option\r\n                        v-for=\"item in typelist\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.name\"\r\n                        :value=\"item.id\">\r\n                    </el-option>\r\n                    </el-select>\r\n            </el-form-item> \r\n            <el-form-item label=\"问题回答:\">\r\n                <div id=\"editorElem\"  style=\"text-align:left\"></div>\r\n            </el-form-item>\r\n             <el-form-item>\r\n            <el-button type=\"primary\"\r\n                    @click=\"dataFormSubmit()\">确定</el-button>\r\n            </el-form-item>\r\n       </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n     getQuestionDetailAPI,\r\n     updateQuestionAPI,\r\n     saveQuestionAPI,\r\n     getQuestionTypeListAPI\r\n} from '@/api/questionAPI.js';\r\nimport axios from 'axios';\r\nimport E from 'wangeditor';\r\nexport default {\r\n    name:'prodList',\r\n    data(){\r\n        return{\r\n            dataForm:{\r\n                title:'',\r\n                content:'',\r\n                typeId:''\r\n            },\r\n            form:{\r\n                size:50,\r\n                current:1\r\n                // statusType:'1'\r\n            },\r\n            item:{},\r\n            typelist:[],\r\n            rules: {\r\n                \r\n            },\r\n        }\r\n    },\r\n    components:{\r\n        // AddDepModal,\r\n    },\r\n    props: {\r\n        updateId: {\r\n            required: true,\r\n        },\r\n    },\r\n    methods:{\r\n        \r\n        /*\r\n         * 获取代理等级详情\r\n         */\r\n        getDetail(id){\r\n            this.tableLoading = true;\r\n             getQuestionDetailAPI(id)\r\n                .then(res => {\r\n                    const orderdata=res.data.data\r\n                    console.log(orderdata)\r\n                    this.item=orderdata;\r\n                    this.dataForm=this.item;\r\n                       \r\n                    var editor = new E('#editorElem')\r\n                    editor.customConfig.uploadImgShowBase64 = true //图片以base64形式保存\r\n                    editor.customConfig.onchange = (html) => {\r\n                        this.dataForm.content = html\r\n                    }\r\n                    editor.customConfig.customUploadImg = (files, insert) => {\r\n                        const formData = new FormData();\r\n                        formData.append('files', files[0]);\r\n                        axios.post(\"http://admin.zhanchengwlkj.com:8080/distribution_backstage/file/addFile\", formData, {\r\n                            headers: {\r\n                                \"Content-Type\": \"multipart/form-data\"\r\n                            }\r\n                            }).then(res => {\r\n                            let { data } = res\r\n                            insert(data.data)  \r\n                            // 插入图片到editor\r\n                            });\r\n                        // formData.append('path', 'files/ne-icev3-dashboard/content/content/');\r\n                        \r\n                        };\r\n                        editor.customConfig.uploadImgShowBase64 = true //图片以base64形式保存\r\n                        editor.create()\r\n                        editor.txt.html(this.dataForm.content)\r\n                    })\r\n                    .catch(err => {\r\n                        \r\n                    })\r\n        },\r\n        getQuestionTypeList(){\r\n            const params = {...this.form};\r\n             getQuestionTypeListAPI(params)\r\n                .then(res => {\r\n                    console.log(res.data.data);\r\n                    const data = res.data.data;\r\n                    this.typelist = data;\r\n                })\r\n                .catch(err => {\r\n                   \r\n                })\r\n        },\r\n         // 表单提交\r\n        dataFormSubmit () {\r\n            console.log(\"title:\"+this.dataForm.title+\" id:\"+this.updateId+\" content:\"+this.dataForm.content);\r\n            let that=this;\r\n                \r\n                const putdata={\r\n                    title: this.dataForm.title,\r\n                    content:this.dataForm.content,\r\n                    typeId:this.dataForm.typeId\r\n                }\r\n                if(this.updateId==0){\r\n                    saveQuestionAPI(putdata)\r\n                            .then(res => {\r\n                                const data = res.data;\r\n                                if (data.code === 200) {\r\n                                        this.$message({\r\n                                            type: 'success',\r\n                                            message: '添加成功',\r\n                                        });\r\n                                    this.backhtmls()\r\n                                        this.$emit('finish-action')\r\n                                }else{\r\n                                    this.$message.error(res.data.msg)\r\n                                }\r\n                            })\r\n                            .catch(err => {\r\n                            });\r\n                }else{\r\n                    putdata.id=this.updateId\r\n                    updateQuestionAPI(putdata)\r\n                                    .then(res => {\r\n                                        console.log(res);\r\n                                        const sucresponse = res.data;\r\n                                        if(sucresponse.code==200){\r\n                                            this.$message({\r\n                                            type: 'success',\r\n                                            message: '修改成功',\r\n                                            });\r\n                                            this.$emit('close-form')\r\n                                            this.$emit('finish-action')\r\n                                        }else{\r\n                                            this.errorMsg(sucresponse.message)\r\n                                        }\r\n                                    })\r\n                                    .catch(err => {\r\n                                        console.log(err)\r\n                                        this.tableLoading = false;\r\n                                    }) \r\n                }\r\n            \r\n        \r\n        },\r\n        /*\r\n        * 返回上层\r\n        */\r\n        backhtmls(){\r\n            this.$emit('close-form')\r\n        }    \r\n    },\r\n    mounted(){\r\n        if(this.updateId==0){\r\n            var editor = new E('#editorElem')\r\n            editor.customConfig.uploadImgShowBase64 = true //图片以base64形式保存\r\n            editor.customConfig.onchange = (html) => {\r\n            this.dataForm.content = html\r\n            }\r\n            editor.customConfig.customUploadImg = (files, insert) => {\r\n            const formData = new FormData();\r\n            formData.append('files', files[0]);\r\n            axios.post(\"http://admin.zhanchengwlkj.com:8080/distribution_backstage/file/addFile\", formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n                }).then(res => {\r\n                let { data } = res\r\n                insert(data.data)  \r\n                // 插入图片到editor\r\n                });\r\n            // formData.append('path', 'files/ne-icev3-dashboard/content/content/');\r\n            \r\n            };\r\n            editor.customConfig.uploadImgShowBase64 = true //图片以base64形式保存\r\n            editor.create()\r\n        }else{\r\n            this.getDetail(this.updateId)\r\n        }\r\n         \r\n        \r\n        this.getQuestionTypeList();\r\n        \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.prod-img{\r\n  max-width: 64px;\r\n    min-width: 64px;\r\n    width: 64px;\r\n    height: 64px;\r\n    line-height: 64px;\r\n    border-radius: 4px;\r\n}\r\n.prod-detail{\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n  line-height: 24px;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src\\components\\question"}]}
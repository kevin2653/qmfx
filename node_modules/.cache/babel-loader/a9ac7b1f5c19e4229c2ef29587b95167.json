{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\LoginPage.vue","mtime":1577671261169},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\HtmlProjects\\\\qmfx\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState, mapActions } from 'vuex';\nimport { BASE_URL } from '@/public/constant';\nimport { loginAPI } from '@/api/globalAPI';\nexport default {\n  name: 'HelloWorld',\n  data: function data() {\n    return {\n      codeImg: null,\n      formLogin: {\n        username: '',\n        pwd: '',\n        code: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        pwd: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    /**\n     * 提交登陆操作\n     */\n    submitLoginForm: function submitLoginForm() {\n      var _this = this;\n\n      var formLogin = _objectSpread({}, this.formLogin);\n\n      this.$refs.formLogin.validate(function (valid) {\n        if (valid) {\n          loginAPI(formLogin).then(function (res) {\n            var _res$data = res.data,\n                code = _res$data.code,\n                data = _res$data.data,\n                message = _res$data.message;\n            console.log(res.data);\n            console.log(code);\n\n            if (code === 200) {\n              var millisecond = new Date().getTime();\n              var expiresTime = new Date(millisecond + 60 * 60 * 1000); // console.log(expiresTime)\n              // Cookies.set('token', 'value', {\n              //     expires: expiresTime,\n              // });\n              // document.cookie = \"token=\"+  data.token + \";expires=\" + expiresTime.toGMTString();\n              // sessionStorage.setItem('token', data.token)\n              // localStorage.setItem('tokendate',expiresTime)\n\n              localStorage.setItem('token', data.token); // localStorage.setItem('rid', data.tid)\n              // localStorage.setItem('username', formLogin.username)\n\n              _this.$message({\n                type: 'success',\n                message: '登陆成功！'\n              }); // 改变登录状态为已登录\n\n\n              _this.$store.commit('moduleLogin/login'); // 跳转到应用\n\n\n              _this.$router.push('/');\n            } else {\n              _this.$message({\n                type: 'error',\n                message: message\n              });\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAqBA,SAAA,YAAA,EAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AAEA,SAAA,QAAA,QAAA,mBAAA;AACA,SAAA,QAAA,QAAA,iBAAA;AAEA,eAAA;AACA,QAAA,YADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,eAAA,IADA;AAEA,iBAAA;AACA,kBAAA,EADA;AAEA,aAAA,EAFA;AAGA,cAAA;AAHA,OAFA;AAOA,aAAA;AACA,kBAAA,CACA;AACA,oBAAA,IADA;AAEA,mBAAA,QAFA;AAGA,mBAAA;AAHA,SADA,CADA;AAQA,aAAA,CACA;AACA,oBAAA,IADA;AAEA,mBAAA,OAFA;AAGA,mBAAA;AAHA,SADA;AARA;AAPA,KAAA;AAwBA,GA3BA;AA4BA,WAAA;AAEA;;;AAGA,mBALA,6BAKA;AAAA;;AACA,UAAA,8BACA,KAAA,SADA,CAAA;;AAGA,WAAA,KAAA,CAAA,SAAA,CAAA,QAAA,CAAA,iBAAA;AACA,YAAA,KAAA,EAAA;AACA,mBAAA,SAAA,EAAA,IAAA,CAAA,eAAA;AAAA,4BACA,IAAA,IADA;AAAA,gBACA,IADA,aACA,IADA;AAAA,gBACA,IADA,aACA,IADA;AAAA,gBACA,OADA,aACA,OADA;AAEA,oBAAA,GAAA,CAAA,IAAA,IAAA;AACA,oBAAA,GAAA,CAAA,IAAA;;AACA,gBAAA,SAAA,GAAA,EAAA;AACA,kBAAA,cAAA,IAAA,IAAA,GAAA,OAAA,EAAA;AACA,kBAAA,cAAA,IAAA,IAAA,CAAA,cAAA,KAAA,EAAA,GAAA,IAAA,CAAA,CAFA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,2BAAA,OAAA,CAAA,OAAA,EAAA,KAAA,KAAA,EAVA,CAWA;AACA;;AAEA,oBAAA,QAAA,CAAA;AAAA,sBAAA,SAAA;AAAA,yBAAA;AAAA,eAAA,EAdA,CAeA;;;AACA,oBACA,MADA,CAEA,MAFA,CAEA,mBAFA,EAhBA,CAmBA;;;AACA,oBACA,OADA,CAEA,IAFA,CAEA,GAFA;AAGA,aAvBA,MAuBA;AACA,oBAAA,QAAA,CAAA;AAAA,sBAAA,OAAA;AAAA,yBAAA;AAAA,eAAA;AACA;AACA,WA9BA;AA+BA;AACA,OAlCA;AAoCA;AA7CA,GA5BA;AA2EA,SA3EA,qBA2EA,CACA;AA5EA,CAAA","sourcesContent":["<!-- 登陆页面 -->\n<template>\n    <div class=\"child-vhc wrapper--login\">\n        <div class=\"form--login\">\n            <el-form ref=\"formLogin\" :model=\"formLogin\" :rules=\"rules\">\n                <div class=\"loginheader\">荣济科技后台管理系统</div>\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"formLogin.username\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"pwd\">\n                    <el-input v-model=\"formLogin.pwd\" type=\"password\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"submitLoginForm\">提交</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {mapMutations, mapState, mapActions} from 'vuex'\n\nimport {BASE_URL} from '@/public/constant'\nimport {loginAPI} from '@/api/globalAPI'\n\nexport default {\n    name: 'HelloWorld',\n    data() {\n        return {\n            codeImg: null,\n            formLogin: {\n                username: '',\n                pwd: '',\n                code: ''\n            },\n            rules: {\n                username: [\n                    {\n                        required: true,\n                        message: '请输入用户名',\n                        trigger: 'blur'\n                    }\n                ],\n                pwd: [\n                    {\n                        required: true,\n                        message: '请输入密码',\n                        trigger: 'blur'\n                    }\n                ],\n            },\n        };\n    },\n    methods: {\n\n        /**\n         * 提交登陆操作\n         */\n        submitLoginForm() {\n            const formLogin = {\n                ...this.formLogin\n            }\n            this.$refs.formLogin.validate(valid => {\n                if (valid) {\n                    loginAPI(formLogin).then(res => {\n                        const {code, data, message} = res.data\n                        console.log(res.data)\n                        console.log(code)\n                        if (code === 200) {\n                            var millisecond = new Date().getTime();\n                            var expiresTime = new Date(millisecond +60*60 * 1000);\n                            // console.log(expiresTime)\n                            // Cookies.set('token', 'value', {\n                            //     expires: expiresTime,\n                            // });\n                            // document.cookie = \"token=\"+  data.token + \";expires=\" + expiresTime.toGMTString();\n                            // sessionStorage.setItem('token', data.token)\n                            // localStorage.setItem('tokendate',expiresTime)\n                            localStorage.setItem('token', data.token)\n                            // localStorage.setItem('rid', data.tid)\n                            // localStorage.setItem('username', formLogin.username)\n\n                            this.$message({type: 'success', message: '登陆成功！'})\n                            // 改变登录状态为已登录\n                            this\n                                .$store\n                                .commit('moduleLogin/login')\n                            // 跳转到应用\n                            this\n                                .$router\n                                .push('/')\n                        } else {\n                            this.$message({type: 'error', message: message})\n                        }\n                    })\n                }\n            })\n           \n        }\n    },\n    mounted() {\n    }\n}\n</script>\n\n<style scoped=\"scoped\" lang=\"less\">\n    .wrapper--login {\n        width: 100%;\n        min-height: 500px;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: url(\"../assets/images/bg.jpg\") center no-repeat;\n        background-size: cover;\n    }\n    .form--login {\n        width: 400px;\n        min-height: 200px;\n        padding: 30px 20px;\n        background: rgba(0, 0, 0, 0.6);\n        border-radius: 6px;\n    }\n    .captcha--wrapper {\n        height: 40px;\n\n        img {\n            height: 100%;\n            background: #fff;\n        }\n    }\n    .loginheader{\n        font-size: 30px;\n        text-align: center;\n        margin: 10px auto;\n        color: #fff;\n    }\n</style>"],"sourceRoot":"src\\components"}]}
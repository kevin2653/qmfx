{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-f322bed8\"],{\"2ce6\":function(e,t,o){\"use strict\";var n=o(\"c0e7\"),r=o.n(n);r.a},c0e7:function(e,t,o){},e7e8:function(e,t,o){\"use strict\";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",[o(\"div\",{staticClass:\"header\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.exportExcel}},[e._v(\"导出\")])],1),o(\"div\",{staticClass:\"filter\"},[o(\"el-form\",{staticClass:\"fl-l\",attrs:{inline:\"\"}},[o(\"el-form-item\",{attrs:{label:\"订单信息:\"}},[o(\"el-col\",{attrs:{span:24}},[o(\"el-input\",{attrs:{placeholder:\"请输入订单号\"},model:{value:e.form.orderNumber,callback:function(t){e.$set(e.form,\"orderNumber\",t)},expression:\"form.orderNumber\"}})],1)],1),o(\"el-form-item\",[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.getOrderList}},[e._v(\"查找\")])],1),o(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},e._l(e.shoptypelist,function(t){return o(\"el-tag\",{key:t.val,class:{active:t.val==e.form.orderState},on:{click:function(o){e.changesearchtype(t.val)}}},[e._v(e._s(t.name))])}))],1)],1),o(\"div\",{staticClass:\"table_body\"},[o(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:\"\",id:\"exportTab\",size:\"medium \"}},[o(\"el-table-column\",{attrs:{prop:\"orderNumber\",label:\"订单编号\",\"min-width\":\"360\"}}),o(\"el-table-column\",{attrs:{prop:\"gmtCreate\",label:\"下单时间\",\"min-width\":\"180\"}}),o(\"el-table-column\",{attrs:{prop:\"nickname\",label:\"下单人\",\"min-width\":\"180\"}}),o(\"el-table-column\",{attrs:{prop:\"num\",label:\"商品数量\",\"min-width\":\"180\"}}),o(\"el-table-column\",{attrs:{prop:\"totalPrice\",label:\"订单金额\",\"min-width\":\"180\"}}),o(\"el-table-column\",{attrs:{prop:\"gmtCreate\",label:\"订单状态\",\"min-width\":\"180\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\"\\n              \"+e._s(e.orderstatelist[t.row.orderState])+\"\\n             \")]}}])}),o(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"300\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[o(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(o){e.changeOrderShow(t.row.id)}}},[e._v(\"订单详情\")]),o(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(o){e.delorderdetail(t.row.id)}}},[e._v(\"\\n                        删除\\n                    \")]),4==t.row.orderState?o(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(o){e.changeOrderDeliverGoods(t.row.oid)}}},[e._v(\"发货\")]):e._e()]}}])})],1),o(\"div\",{staticClass:\"table-footer--APP\",attrs:{slot:\"append\"},slot:\"append\"},[o(\"el-pagination\",{attrs:{\"current-page\":e.form.page,\"page-sizes\":[10,20,30,40,50,60,70,80,90],\"page-size\":e.form.size,layout:\"total, sizes, prev, pager, next, jumper\",total:e.totalCount},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1),o(\"div\",[o(\"el-dialog\",{attrs:{title:\"订单详情\",\"append-to-body\":!0,visible:e.secondDepShow,width:\"80%\"},on:{\"update:visible\":function(t){e.secondDepShow=t}}},[e.secondDepShow?o(\"second-index\",{attrs:{\"order-id\":e.orderId},on:{\"finish-action\":e.getOrderList,\"close-form\":function(t){e.secondDepShow=!1}}}):e._e()],1)],1)],1)])},r=[],a=o(\"c93e\"),s=o(\"f72e\"),i=(o(\"761c\"),o(\"21a6\")),l=o.n(i),c=o(\"1146\"),d=o.n(c),u=function(){return o.e(\"chunk-1c11c252\").then(o.bind(null,\"5ab4\"))},h={name:\"prodList\",data:function(){return{payfun:{1:\"打款凭证\",2:\"线上支付\"},orderstatelist:{\"-1\":\"已删除\",0:\"已关闭\",1:\"待付款\",2:\"待发货\",3:\"待收货\",4:\"已完成\",5:\"退款中\",6:\"退款完成\"},orderId:\"\",form:{current:1,size:10,orderState:\"\",orderNumber:\"\"},freightlist:[],value1:[,],shoptypelist:[{name:\"全部\",val:\"\",nownum:\"\"},{name:\"待付款\",val:\"1\",nownum:\"\"},{name:\"待发货\",val:\"2\",nownum:\"\"},{name:\"待收货\",val:\"3\",nownum:\"\"},{name:\"已完成\",val:\"4\",nownum:\"\"},{name:\"退款中\",val:\"5\",nownum:\"\"},{name:\"退款完成\",val:\"6\",nownum:\"\"}],shoptype:1,shopClassification:\"\",ommodityType:\"\",searchshow:!1,keyword:\"\",tableData:[],totalCount:0,tableLoading:!1,modalAddDepShow:!1,isEdit:!1,depId:0,secondDepShow:!1}},props:{userId:{required:!0}},components:{SecondIndex:u},methods:{changeOrderShow:function(e){this.orderId=e,console.log(e),console.log(this.orderId),this.secondDepShow=!0},getOrderList:function(){var e=this,t=Object(a[\"a\"])({},this.form);this.tableLoading=!0,Object(s[\"b\"])(t).then(function(t){var o=t.data.data;e.totalCount=o.total,e.tableData=o.records,e.tableLoading=!1;var n=o.count;e.shoptypelist[0].nownum=n.putawayNum,e.shoptypelist[1].nownum=n.sellOutNum,e.shoptypelist[2].nownum=n.soldOutNum,e.shoptypelist[3].nownum=n.warningNum}).catch(function(t){e.tableLoading=!1})},delorderdetail:function(e){var t=this;console.log(e),this.$confirm(\"确定要删除该订单么？（此操作不可逆）\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(s[\"a\"])(e).then(function(e){200===e.data.code?(t.$message({type:\"success\",message:\"该订单已经删除\"}),t.getOrderList()):t.$message.error(e.data.msg)}).catch(function(e){})})},changeOrderDeliverGoods:function(e){var t=this;Object(s[\"d\"])(e).then(function(e){var o=e.data,n=\"success\";200===o.code?t.getOrderList():n=\"error\",t.$message({type:n,message:\"success\"===n?\"操作成功！\":o.message})})},exportExcel:function(){var e={raw:!0},t=d.a.utils.table_to_book(document.querySelector(\"#exportTab\"),e),o=d.a.write(t,{bookType:\"xlsx\",bookSST:!0,type:\"array\"});try{l.a.saveAs(new Blob([o],{type:\"application/octet-stream\"}),\"订单信息表.xlsx\")}catch(e){\"undefined\"!==typeof console&&console.log(e,o)}return o},changesearchtype:function(e){this.form.orderState=e,this.getOrderList()},changetable:function(e){console.log(e),\"price\"==e.prop&&\"ascending\"==e.order?this.form.sortType=1:\"price\"==e.prop&&\"descending\"==e.order&&(this.form.sortType=2),console.log(this.form),this.getOrderList()},handleSizeChange:function(e){this.form.size=e,this.getOrderList()},handleCurrentChange:function(e){this.form.current=e,this.getOrderList()},handleAddDep:function(){this.depId=0,this.isEdit=!1,this.secondDepShow=!0},handleCheck:function(e,t){this.depId=t.pid,this.secondDepShow=!0,this.isEdit=!0},handleDel:function(e,t){var o=this,n=t.id;deleteFirstDepAPI(n).then(function(e){var t=e.data,n=\"success\";1e3===t.code?o.getOrderList():n=\"error\",o.$message({type:n,message:\"success\"===n?\"删除成功！\":t.msg})})},changeshow:function(){console.log(123),this.searchshow=!this.searchshow},handleSecondDepShow:function(){this.secondDepShow=!0,this.depId=0,this.isEdit=!1}},created:function(){this.form.userId=this.userId,this.getOrderList()}},p=h,m=(o(\"2ce6\"),o(\"2877\")),f=Object(m[\"a\"])(p,n,r,!1,null,\"02a502c2\",null);f.options.__file=\"allOrderList.vue\";t[\"default\"]=f.exports},f72e:function(e,t,o){\"use strict\";o.d(t,\"b\",function(){return r}),o.d(t,\"c\",function(){return a}),o.d(t,\"d\",function(){return s}),o.d(t,\"a\",function(){return i});var n=o(\"5bf4\"),r=function(e){return Object(n[\"a\"])({url:\"/orders/page\",method:\"get\",headers:{token:localStorage.getItem(\"token\")},params:e})},a=function(e){return Object(n[\"a\"])({url:\"/orders/info/\"+e,method:\"get\",headers:{token:localStorage.getItem(\"token\")}})},s=function(e){return Object(n[\"a\"])({url:\"/orders/shipments/\"+e,method:\"put\",headers:{token:localStorage.getItem(\"token\")}})},i=function(e){return Object(n[\"a\"])({url:\"/orders/delete/\"+e,method:\"delete\",headers:{token:localStorage.getItem(\"token\")}})}}}]);","extractedComments":[]}
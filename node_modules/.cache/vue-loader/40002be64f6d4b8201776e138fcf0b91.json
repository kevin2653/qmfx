{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\allOrderManage\\orderLogisticInfo.vue?vue&type=style&index=0&id=2e8c1162&scoped=true&lang=less&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\allOrderManage\\orderLogisticInfo.vue","mtime":1579186746352},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\less-loader\\dist\\cjs.js","mtime":1577370155895},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.prod-img{\r\n  max-width: 64px;\r\n    min-width: 64px;\r\n    width: 64px;\r\n    height: 64px;\r\n    line-height: 64px;\r\n    border-radius: 4px;\r\n}\r\n.prod-detail{\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n  line-height: 24px;\r\n}\r\n",{"version":3,"sources":["orderLogisticInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderLogisticInfo.vue","sourceRoot":"src\\components\\allOrderManage","sourcesContent":["/*\r\n * @Description: 订单详情\r\n * @Author: jian.weng\r\n * @Date: 2019-10-29 10:49:29\r\n */\r\n\r\n<template>\r\n    <div>\r\n       \r\n        <el-form :model=\"dataForm\"\r\n             ref=\"dataForm\"\r\n             label-width=\"150px\">\r\n            <el-form-item label=\"快递公司选择\">\r\n                <el-select v-model=\"expressCompany\"   placeholder=\"请选择\">\r\n                    <el-option\r\n                        v-for=\"item in expressCompanyList\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.name\"\r\n                        :value=\"item.name\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"快递单号:\"\r\n                            :rules=\"[{ required: true, message: '快递单号不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"logisticCode\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系人:\"\r\n                            :rules=\"[{ required: true, message: '联系人不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"name\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系电话:\"\r\n                            :rules=\"[{ required: true, message: '联系电话不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"phone\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n            <el-form-item label=\"收货地址:\"\r\n                            :rules=\"[{ required: true, message: '收货地址不能为空'}]\">\r\n                <el-col :span=\"8\">\r\n                <el-input v-model=\"address\"\r\n                            placeholder=\"请输入\"\r\n                            maxlength=\"50\"></el-input>\r\n                </el-col>\r\n            </el-form-item>\r\n             <el-form-item>\r\n            <el-button type=\"primary\"\r\n                    @click=\"dataFormSubmit()\">确定</el-button>\r\n            </el-form-item>\r\n       </el-form>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n     getOrderLogisticDetailAPI,\r\n     saveOrderLogisticAPI,\r\n     updateOrderLogisticAPI\r\n} from '@/api/prodOrderLogisticAPI.js'\r\nimport {\r\n     getOrderDetailAPI,\r\n} from '@/api/prodOrderAPI.js'\r\nexport default {\r\n    name:'prodList',\r\n    data(){\r\n        return{\r\n            dataForm:{\r\n    \r\n            },\r\n            expressCompanyList:[\r\n                {id:0,name:\"圆通速递\",number:\"YTO\"},\r\n                {id:1,name:\"申通快递\",number:\"STO\"},\r\n                {id:2,name:\"中通快递\",number:\"ZTO\"}\r\n            ]\r\n            ,\r\n            sendway:{\r\n                1:\"快递\",\r\n                2:\"自提\",\r\n                3:\"无需物流\"\r\n            },\r\n            expressCompany:'',\r\n            expressNumber:'',\r\n            logisticCode:'',\r\n            name:'',\r\n            phone:'',\r\n            address:'',\r\n            item:{},\r\n            order:{}\r\n        };\r\n    },\r\n    components:{\r\n        // AddDepModal,\r\n    },\r\n    props: {\r\n        updateId: {\r\n            required: true,\r\n        },\r\n        orderId: {\r\n            required: true,\r\n        }\r\n    },\r\n    methods:{\r\n        /**\r\n         * @msg: 时间处理\r\n         * @param {type} \r\n         * @return: \r\n         */\r\n        timechange(time,type){\r\n            return timeStamp2String(time,type)\r\n        },\r\n        /*\r\n         * 获取详情\r\n         */\r\n        getDetail(id){\r\n            this.tableLoading = true;\r\n             getOrderLogisticDetailAPI(id)\r\n                .then(res => {\r\n                    const orderdata=res.data.data\r\n                    console.log(orderdata)\r\n                    this.item = orderdata;\r\n                    this.expressCompany = orderdata.expressCompany;\r\n                    this.expressNumber = orderdata.expressNumber;\r\n                    this.logisticCode = orderdata.logisticCode;\r\n                    this.name = orderdata.contactName;\r\n                    this.phone = orderdata.contactPhone;\r\n                    this.address = orderdata.contactAddress;\r\n                    console.log(this.dataForm.expressCompany)\r\n                })\r\n                .catch(err => {\r\n                    this.tableLoading = false;\r\n                })\r\n        },\r\n        dataFormSubmit () {\r\n          \r\n            for(var i=0;i<this.expressCompanyList.length;i++){\r\n                if(this.expressCompanyList[i].name == this.expressCompany){\r\n                    this.expressNumber = this.expressCompanyList[i].number;\r\n                }\r\n            }\r\n            console.log(\"快递公司：\"+this.expressCompany+\" 快递公司编号：\"+this.expressNumber);\r\n            //累加订单产品id\r\n            console.log(this.order);\r\n            var opid = \"\";\r\n            for(var i=0;i<this.order.orderProductVOList.length;i++){\r\n                if(i==this.order.orderProductVOList.length-1){\r\n                    opid+=this.order.orderProductVOList[i].id;\r\n                }else{\r\n                    opid+=this.order.orderProductVOList[i].id+\",\";\r\n                }\r\n               \r\n            }\r\n            console.log(\"opid\"+opid);\r\n        this.$refs['dataForm'].validate((valid) => {\r\n                    const args = {\r\n                        orderId:this.orderId,\r\n                        orderProductId:opid,\r\n                        expressCompany:this.expressCompany,\r\n                        expressNumber:this.expressNumber,\r\n                        logisticCode:this.logisticCode,\r\n                        contactName:this.name,\r\n                        contactPhone:this.phone,\r\n                        contactAddress:this.address\r\n                    };\r\n                    console.log(args);\r\n                 \r\n                    if(this.updateId==0){\r\n                      saveOrderLogisticAPI(args)\r\n                        .then(res => {\r\n                            const data = res.data;\r\n                            if (data.code === 200) {\r\n                                    this.$message({\r\n                                        type: 'success',\r\n                                        message: '添加成功',\r\n                                    });\r\n                                this.$emit('close-form')\r\n                                this.$emit('finish-action')\r\n                            }else{\r\n                                this.$message.error(res.data.msg)\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                        });\r\n                    }else{\r\n                      args.id=this.item.id\r\n                      updateOrderLogisticAPI(args)\r\n                        .then(res => {\r\n                            const data = res.data;\r\n                            if (data.code === 200) {\r\n                                    this.$message({\r\n                                        type: 'success',\r\n                                        message: '修改成功',\r\n                                    });\r\n                                this.$emit('close-form')\r\n                                this.$emit('finish-action')\r\n                            }else{\r\n                                this.$message.error(res.data.msg)\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                        });\r\n                    }\r\n        })\r\n    },\r\n    /*\r\n         * 获取订单详情\r\n         */\r\n        getOrderDetail(id){\r\n            this.tableLoading = true;\r\n             getOrderDetailAPI(id)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    this.order=res.data.data;\r\n               \r\n                    this.name = this.order.contactName;\r\n                    this.phone = this.order.contactPhone;\r\n                    this.address = this.order.contactAddress;\r\n                })\r\n                .catch(err => {\r\n                    \r\n                })\r\n        },\r\n        \r\n    },\r\n    mounted(){\r\n        if(this.updateId>0){\r\n            this.getDetail(this.updateId)\r\n        }\r\n\r\n        this.getOrderDetail(this.orderId);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.prod-img{\r\n  max-width: 64px;\r\n    min-width: 64px;\r\n    width: 64px;\r\n    height: 64px;\r\n    line-height: 64px;\r\n    border-radius: 4px;\r\n}\r\n.prod-detail{\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n  line-height: 24px;\r\n}\r\n</style>\r\n\r\n"]}]}
{"remainingRequest":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\qmfx\\src\\components\\LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\qmfx\\src\\components\\LoginPage.vue","mtime":1577671261169},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577370171724},{"path":"E:\\HtmlProjects\\qmfx\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapMutations, mapState, mapActions} from 'vuex'\n\nimport {BASE_URL} from '@/public/constant'\nimport {loginAPI} from '@/api/globalAPI'\n\nexport default {\n    name: 'HelloWorld',\n    data() {\n        return {\n            codeImg: null,\n            formLogin: {\n                username: '',\n                pwd: '',\n                code: ''\n            },\n            rules: {\n                username: [\n                    {\n                        required: true,\n                        message: '请输入用户名',\n                        trigger: 'blur'\n                    }\n                ],\n                pwd: [\n                    {\n                        required: true,\n                        message: '请输入密码',\n                        trigger: 'blur'\n                    }\n                ],\n            },\n        };\n    },\n    methods: {\n\n        /**\n         * 提交登陆操作\n         */\n        submitLoginForm() {\n            const formLogin = {\n                ...this.formLogin\n            }\n            this.$refs.formLogin.validate(valid => {\n                if (valid) {\n                    loginAPI(formLogin).then(res => {\n                        const {code, data, message} = res.data\n                        console.log(res.data)\n                        console.log(code)\n                        if (code === 200) {\n                            var millisecond = new Date().getTime();\n                            var expiresTime = new Date(millisecond +60*60 * 1000);\n                            // console.log(expiresTime)\n                            // Cookies.set('token', 'value', {\n                            //     expires: expiresTime,\n                            // });\n                            // document.cookie = \"token=\"+  data.token + \";expires=\" + expiresTime.toGMTString();\n                            // sessionStorage.setItem('token', data.token)\n                            // localStorage.setItem('tokendate',expiresTime)\n                            localStorage.setItem('token', data.token)\n                            // localStorage.setItem('rid', data.tid)\n                            // localStorage.setItem('username', formLogin.username)\n\n                            this.$message({type: 'success', message: '登陆成功！'})\n                            // 改变登录状态为已登录\n                            this\n                                .$store\n                                .commit('moduleLogin/login')\n                            // 跳转到应用\n                            this\n                                .$router\n                                .push('/')\n                        } else {\n                            this.$message({type: 'error', message: message})\n                        }\n                    })\n                }\n            })\n           \n        }\n    },\n    mounted() {\n    }\n}\n",{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"LoginPage.vue","sourceRoot":"src\\components","sourcesContent":["<!-- 登陆页面 -->\n<template>\n    <div class=\"child-vhc wrapper--login\">\n        <div class=\"form--login\">\n            <el-form ref=\"formLogin\" :model=\"formLogin\" :rules=\"rules\">\n                <div class=\"loginheader\">荣济科技后台管理系统</div>\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"formLogin.username\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"pwd\">\n                    <el-input v-model=\"formLogin.pwd\" type=\"password\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"submitLoginForm\">提交</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {mapMutations, mapState, mapActions} from 'vuex'\n\nimport {BASE_URL} from '@/public/constant'\nimport {loginAPI} from '@/api/globalAPI'\n\nexport default {\n    name: 'HelloWorld',\n    data() {\n        return {\n            codeImg: null,\n            formLogin: {\n                username: '',\n                pwd: '',\n                code: ''\n            },\n            rules: {\n                username: [\n                    {\n                        required: true,\n                        message: '请输入用户名',\n                        trigger: 'blur'\n                    }\n                ],\n                pwd: [\n                    {\n                        required: true,\n                        message: '请输入密码',\n                        trigger: 'blur'\n                    }\n                ],\n            },\n        };\n    },\n    methods: {\n\n        /**\n         * 提交登陆操作\n         */\n        submitLoginForm() {\n            const formLogin = {\n                ...this.formLogin\n            }\n            this.$refs.formLogin.validate(valid => {\n                if (valid) {\n                    loginAPI(formLogin).then(res => {\n                        const {code, data, message} = res.data\n                        console.log(res.data)\n                        console.log(code)\n                        if (code === 200) {\n                            var millisecond = new Date().getTime();\n                            var expiresTime = new Date(millisecond +60*60 * 1000);\n                            // console.log(expiresTime)\n                            // Cookies.set('token', 'value', {\n                            //     expires: expiresTime,\n                            // });\n                            // document.cookie = \"token=\"+  data.token + \";expires=\" + expiresTime.toGMTString();\n                            // sessionStorage.setItem('token', data.token)\n                            // localStorage.setItem('tokendate',expiresTime)\n                            localStorage.setItem('token', data.token)\n                            // localStorage.setItem('rid', data.tid)\n                            // localStorage.setItem('username', formLogin.username)\n\n                            this.$message({type: 'success', message: '登陆成功！'})\n                            // 改变登录状态为已登录\n                            this\n                                .$store\n                                .commit('moduleLogin/login')\n                            // 跳转到应用\n                            this\n                                .$router\n                                .push('/')\n                        } else {\n                            this.$message({type: 'error', message: message})\n                        }\n                    })\n                }\n            })\n           \n        }\n    },\n    mounted() {\n    }\n}\n</script>\n\n<style scoped=\"scoped\" lang=\"less\">\n    .wrapper--login {\n        width: 100%;\n        min-height: 500px;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: url(\"../assets/images/bg.jpg\") center no-repeat;\n        background-size: cover;\n    }\n    .form--login {\n        width: 400px;\n        min-height: 200px;\n        padding: 30px 20px;\n        background: rgba(0, 0, 0, 0.6);\n        border-radius: 6px;\n    }\n    .captcha--wrapper {\n        height: 40px;\n\n        img {\n            height: 100%;\n            background: #fff;\n        }\n    }\n    .loginheader{\n        font-size: 30px;\n        text-align: center;\n        margin: 10px auto;\n        color: #fff;\n    }\n</style>"]}]}